<!DOCTYPE HTML>
<html lang="en" class="navy" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>FPS Tutorial - Fyrox Book</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "navy";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('navy')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../introduction.html"><strong aria-hidden="true">1.</strong> About the Book</a></li><li class="chapter-item expanded "><a href="../../introduction/index.html"><strong aria-hidden="true">2.</strong> Introduction</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../introduction/introduction.html"><strong aria-hidden="true">2.1.</strong> Introduction to Fyrox</a></li><li class="chapter-item expanded "><a href="../../introduction/requirements.html"><strong aria-hidden="true">2.2.</strong> System Requirements and Supported Platforms</a></li><li class="chapter-item expanded "><a href="../../introduction/basic_concepts.html"><strong aria-hidden="true">2.3.</strong> Basic concepts</a></li><li class="chapter-item expanded "><a href="../../introduction/philosophy_and_goals.html"><strong aria-hidden="true">2.4.</strong> Design Philosophy and Goals</a></li><li class="chapter-item expanded "><a href="../../introduction/faq.html"><strong aria-hidden="true">2.5.</strong> Frequently Asked Questions</a></li></ol></li><li class="chapter-item expanded "><a href="../../beginning/getting_started.html"><strong aria-hidden="true">3.</strong> Getting started</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../beginning/scripting.html"><strong aria-hidden="true">3.1.</strong> Editor, Plugins and Scripts</a></li><li class="chapter-item expanded "><a href="../../beginning/editor_overview.html"><strong aria-hidden="true">3.2.</strong> Editor Overview</a></li><li class="chapter-item expanded "><a href="../../beginning/scene_and_scene_graph.html"><strong aria-hidden="true">3.3.</strong> Scene and scene graph</a></li><li class="chapter-item expanded "><a href="../../beginning/assets.html"><strong aria-hidden="true">3.4.</strong> Assets</a></li><li class="chapter-item expanded "><a href="../../beginning/data_management.html"><strong aria-hidden="true">3.5.</strong> Data management</a></li></ol></li><li class="chapter-item expanded "><a href="../../scripting/scripting.html"><strong aria-hidden="true">4.</strong> Scripting</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../scripting/plugin.html"><strong aria-hidden="true">4.1.</strong> Plugins</a></li><li class="chapter-item expanded "><a href="../../scripting/executor.html"><strong aria-hidden="true">4.2.</strong> Executor</a></li><li class="chapter-item expanded "><a href="../../scripting/script.html"><strong aria-hidden="true">4.3.</strong> Scripts</a></li><li class="chapter-item expanded "><a href="../../scripting/tasks.html"><strong aria-hidden="true">4.4.</strong> Tasks</a></li></ol></li><li class="chapter-item expanded "><a href="../../scene/scene.html"><strong aria-hidden="true">5.</strong> Scene</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../scene/graph.html"><strong aria-hidden="true">5.1.</strong> Graph</a></li><li class="chapter-item expanded "><a href="../../scene/transform.html"><strong aria-hidden="true">5.2.</strong> Transformation</a></li><li class="chapter-item expanded "><a href="../../scene/prefab.html"><strong aria-hidden="true">5.3.</strong> Prefabs</a></li><li class="chapter-item expanded "><a href="../../scene/inheritance.html"><strong aria-hidden="true">5.4.</strong> Property Inheritance</a></li><li class="chapter-item expanded "><a href="../../scene/base_node.html"><strong aria-hidden="true">5.5.</strong> Base Node</a></li><li class="chapter-item expanded "><a href="../../scene/mesh_node.html"><strong aria-hidden="true">5.6.</strong> Mesh Node</a></li><li class="chapter-item expanded "><a href="../../scene/light_node.html"><strong aria-hidden="true">5.7.</strong> Light Node</a></li><li class="chapter-item expanded "><a href="../../scene/sprite_node.html"><strong aria-hidden="true">5.8.</strong> Sprite Node</a></li><li class="chapter-item expanded "><a href="../../scene/particle_system_node.html"><strong aria-hidden="true">5.9.</strong> Particle System Node</a></li><li class="chapter-item expanded "><a href="../../scene/terrain_node.html"><strong aria-hidden="true">5.10.</strong> Terrain Node</a></li><li class="chapter-item expanded "><a href="../../scene/camera_node.html"><strong aria-hidden="true">5.11.</strong> Camera Node</a></li><li class="chapter-item expanded "><a href="../../scene/decal_node.html"><strong aria-hidden="true">5.12.</strong> Decal Node</a></li><li class="chapter-item expanded "><a href="../../scene/rectangle.html"><strong aria-hidden="true">5.13.</strong> Rectangle Node</a></li><li class="chapter-item expanded "><a href="../../scene/custom_node.html"><strong aria-hidden="true">5.14.</strong> Custom Node</a></li><li class="chapter-item expanded "><a href="../../physics/physics.html"><strong aria-hidden="true">5.15.</strong> Physics</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../physics/rigid_body.html"><strong aria-hidden="true">5.15.1.</strong> Rigid Body</a></li><li class="chapter-item expanded "><a href="../../physics/collider.html"><strong aria-hidden="true">5.15.2.</strong> Collider</a></li><li class="chapter-item expanded "><a href="../../physics/joint.html"><strong aria-hidden="true">5.15.3.</strong> Joint</a></li><li class="chapter-item expanded "><a href="../../physics/ray.html"><strong aria-hidden="true">5.15.4.</strong> Ray Casting</a></li><li class="chapter-item expanded "><a href="../../physics/ragdoll.html"><strong aria-hidden="true">5.15.5.</strong> Ragdoll</a></li></ol></li><li class="chapter-item expanded "><a href="../../sound/index.html"><strong aria-hidden="true">5.16.</strong> Sound</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../sound/bus.html"><strong aria-hidden="true">5.16.1.</strong> Audio Bus</a></li><li class="chapter-item expanded "><a href="../../sound/sound.html"><strong aria-hidden="true">5.16.2.</strong> Sound Node</a></li><li class="chapter-item expanded "><a href="../../sound/hrtf.html"><strong aria-hidden="true">5.16.3.</strong> HRTF</a></li></ol></li><li class="chapter-item expanded "><a href="../../animation/animation.html"><strong aria-hidden="true">5.17.</strong> Animation</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../animation/anim_editor.html"><strong aria-hidden="true">5.17.1.</strong> Animation Editor</a></li><li class="chapter-item expanded "><a href="../../animation/blending.html"><strong aria-hidden="true">5.17.2.</strong> Animation Blending</a></li><li class="chapter-item expanded "><a href="../../animation/absm_editor.html"><strong aria-hidden="true">5.17.3.</strong> ABSM Editor</a></li><li class="chapter-item expanded "><a href="../../animation/signal.html"><strong aria-hidden="true">5.17.4.</strong> Signals</a></li><li class="chapter-item expanded "><a href="../../animation/root_motion/root_motion.html"><strong aria-hidden="true">5.17.5.</strong> Root Motion</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../input/input.html"><strong aria-hidden="true">6.</strong> Input Handling</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../input/keyboard.html"><strong aria-hidden="true">6.1.</strong> Keyboard</a></li><li class="chapter-item expanded "><a href="../../input/mouse.html"><strong aria-hidden="true">6.2.</strong> Mouse</a></li><li class="chapter-item expanded "><a href="../../input/text.html"><strong aria-hidden="true">6.3.</strong> Raw Text Input (WIP)</a></li></ol></li><li class="chapter-item expanded "><a href="../../ai/ai.html"><strong aria-hidden="true">7.</strong> Artificial Intelligence (WIP)</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../ai/beh_tree.html"><strong aria-hidden="true">7.1.</strong> Behaviour Trees (WIP)</a></li><li class="chapter-item expanded "><a href="../../ai/pathfinding.html"><strong aria-hidden="true">7.2.</strong> Path Finding</a></li><li class="chapter-item expanded "><a href="../../ai/navmesh.html"><strong aria-hidden="true">7.3.</strong> Navigational Meshes</a></li></ol></li><li class="chapter-item expanded "><a href="../../rendering/rendering.html"><strong aria-hidden="true">8.</strong> Rendering</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../rendering/shaders.html"><strong aria-hidden="true">8.1.</strong> Shaders</a></li><li class="chapter-item expanded "><a href="../../rendering/materials.html"><strong aria-hidden="true">8.2.</strong> Materials</a></li><li class="chapter-item expanded "><a href="../../rendering/lightmaps.html"><strong aria-hidden="true">8.3.</strong> Light Maps</a></li><li class="chapter-item expanded "><a href="../../rendering/settings.html"><strong aria-hidden="true">8.4.</strong> Settings</a></li><li class="chapter-item expanded "><a href="../../rendering/render_pass.html"><strong aria-hidden="true">8.5.</strong> Render Pass</a></li><li class="chapter-item expanded "><a href="../../rendering/normal_maps.html"><strong aria-hidden="true">8.6.</strong> Normal Maps</a></li></ol></li><li class="chapter-item expanded "><a href="../../resources/resources.html"><strong aria-hidden="true">9.</strong> Resource Management</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../resources/model.html"><strong aria-hidden="true">9.1.</strong> Models</a></li><li class="chapter-item expanded "><a href="../../resources/texture.html"><strong aria-hidden="true">9.2.</strong> Textures</a></li><li class="chapter-item expanded "><a href="../../resources/sound.html"><strong aria-hidden="true">9.3.</strong> Sound Buffers (WIP)</a></li><li class="chapter-item expanded "><a href="../../resources/curve.html"><strong aria-hidden="true">9.4.</strong> Curves (WIP)</a></li><li class="chapter-item expanded "><a href="../../resources/custom.html"><strong aria-hidden="true">9.5.</strong> Custom Resource</a></li><li class="chapter-item expanded "><a href="../../resources/hot_reloading.html"><strong aria-hidden="true">9.6.</strong> Hot Reloading (WIP)</a></li></ol></li><li class="chapter-item expanded "><a href="../../ui/ui.html"><strong aria-hidden="true">10.</strong> User Interface</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../ui/basic_concepts/basic_concepts.html"><strong aria-hidden="true">10.1.</strong> Basic concepts</a></li><li class="chapter-item expanded "><a href="../../ui/editor/editor.html"><strong aria-hidden="true">10.2.</strong> Editor</a></li><li class="chapter-item expanded "><a href="../../ui/rendering.html"><strong aria-hidden="true">10.3.</strong> Rendering</a></li><li class="chapter-item expanded "><a href="../../ui/font.html"><strong aria-hidden="true">10.4.</strong> Fonts</a></li><li class="chapter-item expanded "><a href="../../ui/style.html"><strong aria-hidden="true">10.5.</strong> Style</a></li><li class="chapter-item expanded "><a href="../../ui/widgets.html"><strong aria-hidden="true">10.6.</strong> Widgets</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../ui/custom.html"><strong aria-hidden="true">10.6.1.</strong> Custom widget</a></li><li class="chapter-item expanded "><a href="../../ui/button.html"><strong aria-hidden="true">10.6.2.</strong> Button</a></li><li class="chapter-item expanded "><a href="../../ui/border.html"><strong aria-hidden="true">10.6.3.</strong> Border</a></li><li class="chapter-item expanded "><a href="../../ui/canvas.html"><strong aria-hidden="true">10.6.4.</strong> Canvas</a></li><li class="chapter-item expanded "><a href="../../ui/checkbox/check_box.html"><strong aria-hidden="true">10.6.5.</strong> Check box</a></li><li class="chapter-item expanded "><a href="../../ui/curve_editor.html"><strong aria-hidden="true">10.6.6.</strong> Curve editor (WIP)</a></li><li class="chapter-item expanded "><a href="../../ui/decorator.html"><strong aria-hidden="true">10.6.7.</strong> Decorator (WIP)</a></li><li class="chapter-item expanded "><a href="../../ui/dock.html"><strong aria-hidden="true">10.6.8.</strong> Docking manager (WIP)</a></li><li class="chapter-item expanded "><a href="../../ui/dropdown_list.html"><strong aria-hidden="true">10.6.9.</strong> Dropdown list (WIP)</a></li><li class="chapter-item expanded "><a href="../../ui/expander.html"><strong aria-hidden="true">10.6.10.</strong> Expander (WIP)</a></li><li class="chapter-item expanded "><a href="../../ui/file_browser.html"><strong aria-hidden="true">10.6.11.</strong> File browser (WIP)</a></li><li class="chapter-item expanded "><a href="../../ui/grid.html"><strong aria-hidden="true">10.6.12.</strong> Grid</a></li><li class="chapter-item expanded "><a href="../../ui/image.html"><strong aria-hidden="true">10.6.13.</strong> Image</a></li><li class="chapter-item expanded "><a href="../../ui/inspector.html"><strong aria-hidden="true">10.6.14.</strong> Inspector (WIP)</a></li><li class="chapter-item expanded "><a href="../../ui/list_view.html"><strong aria-hidden="true">10.6.15.</strong> List view (WIP)</a></li><li class="chapter-item expanded "><a href="../../ui/menu.html"><strong aria-hidden="true">10.6.16.</strong> Menu (WIP)</a></li><li class="chapter-item expanded "><a href="../../ui/message_box.html"><strong aria-hidden="true">10.6.17.</strong> Message box (WIP)</a></li><li class="chapter-item expanded "><a href="../../ui/numeric.html"><strong aria-hidden="true">10.6.18.</strong> Numeric field</a></li><li class="chapter-item expanded "><a href="../../ui/popup.html"><strong aria-hidden="true">10.6.19.</strong> Popup (WIP)</a></li><li class="chapter-item expanded "><a href="../../ui/progress_bar.html"><strong aria-hidden="true">10.6.20.</strong> Progress bar (WIP)</a></li><li class="chapter-item expanded "><a href="../../ui/range.html"><strong aria-hidden="true">10.6.21.</strong> Range (WIP)</a></li><li class="chapter-item expanded "><a href="../../ui/rect.html"><strong aria-hidden="true">10.6.22.</strong> Rect (WIP)</a></li><li class="chapter-item expanded "><a href="../../ui/scroll_bar.html"><strong aria-hidden="true">10.6.23.</strong> Scroll bar</a></li><li class="chapter-item expanded "><a href="../../ui/scroll_panel.html"><strong aria-hidden="true">10.6.24.</strong> Scroll panel</a></li><li class="chapter-item expanded "><a href="../../ui/scroll_viewer.html"><strong aria-hidden="true">10.6.25.</strong> Scroll viewer</a></li><li class="chapter-item expanded "><a href="../../ui/screen.html"><strong aria-hidden="true">10.6.26.</strong> Screen</a></li><li class="chapter-item expanded "><a href="../../ui/stack_panel.html"><strong aria-hidden="true">10.6.27.</strong> Stack panel</a></li><li class="chapter-item expanded "><a href="../../ui/tab_control.html"><strong aria-hidden="true">10.6.28.</strong> Tab control</a></li><li class="chapter-item expanded "><a href="../../ui/text.html"><strong aria-hidden="true">10.6.29.</strong> Text</a></li><li class="chapter-item expanded "><a href="../../ui/text_box.html"><strong aria-hidden="true">10.6.30.</strong> Text box</a></li><li class="chapter-item expanded "><a href="../../ui/tree.html"><strong aria-hidden="true">10.6.31.</strong> Tree (WIP)</a></li><li class="chapter-item expanded "><a href="../../ui/vector_image.html"><strong aria-hidden="true">10.6.32.</strong> Vector image</a></li><li class="chapter-item expanded "><a href="../../ui/window.html"><strong aria-hidden="true">10.6.33.</strong> Window</a></li><li class="chapter-item expanded "><a href="../../ui/wrap_panel.html"><strong aria-hidden="true">10.6.34.</strong> Wrap panel</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../serialization/index.html"><strong aria-hidden="true">11.</strong> Serialization</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../serialization/save.html"><strong aria-hidden="true">11.1.</strong> Saved Games</a></li></ol></li><li class="chapter-item expanded "><a href="../../editor/index.html"><strong aria-hidden="true">12.</strong> Editor</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../editor/property_editors.html"><strong aria-hidden="true">12.1.</strong> Property Editors</a></li><li class="chapter-item expanded "><a href="../../editor/settings.html"><strong aria-hidden="true">12.2.</strong> Settings</a></li></ol></li><li class="chapter-item expanded "><a href="../../misc/misc.html"><strong aria-hidden="true">13.</strong> Miscellaneous</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../misc/log.html"><strong aria-hidden="true">13.1.</strong> Log</a></li></ol></li><li class="chapter-item expanded "><a href="../../tutorials/tutorials.html"><strong aria-hidden="true">14.</strong> Tutorials</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../tutorials/fps/fps-tutorial.html" class="active"><strong aria-hidden="true">14.1.</strong> FPS Tutorial</a></li><li class="chapter-item expanded "><a href="../../tutorials/rpg/intro.html"><strong aria-hidden="true">14.2.</strong> RPG Tutorial</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../tutorials/rpg/tutorial-1/tutorial-part-1.html"><strong aria-hidden="true">14.2.1.</strong> Character controller</a></li></ol></li><li class="chapter-item expanded "><a href="../../tutorials/platformer/part1.html"><strong aria-hidden="true">14.3.</strong> 2D Platformer tutorial</a></li></ol></li><li class="chapter-item expanded "><a href="../../performance/index.html"><strong aria-hidden="true">15.</strong> Performance</a></li><li class="chapter-item expanded "><a href="../../obsolete/obsolete.html"><strong aria-hidden="true">16.</strong> Obsolete</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../obsolete/custom_game_loop.html"><strong aria-hidden="true">16.1.</strong> Custom game loop</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Fyrox Book</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/fyrox-book/fyrox-book.github.io" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="first-person-shooter-tutorial"><a class="header" href="#first-person-shooter-tutorial">First-Person Shooter Tutorial</a></h1>
<p>In this tutorial we'll create a first-person shooter game. </p>
<p>Before we begin, make sure you know how to create projects and run the game and the editor. Read 
<a href="../../beginning/scripting.html">this chapter</a> first and let's start by creating a new project by executing the following 
command in some directory:</p>
<pre><code class="language-shell">fyrox-template init --name=fps --style=3d
</code></pre>
<p>This command will create a new cargo workspace with a few projects inside, we're interested only in <code>game</code> folder
in this tutorial.</p>
<pre><code class="language-text">fps
├───data
├───editor
│   └───src
├───executor
│   └───src
├───executor-android
│   └───src
├───executor-wasm
│   └───src
└───game
    └───src
</code></pre>
<h2 id="player-prefab"><a class="header" href="#player-prefab">Player Prefab</a></h2>
<p>Let's start by creating a <a href="../../scene/prefab.html">prefab</a> for the player. First-person shooters uses quite simple 
layout for characters - usually it is just a physical capsule with a camera on top of it. Run the editor using the 
following command:</p>
<pre><code class="language-shell">cargo run --package editor
</code></pre>
<p><img src="editor_1.png" alt="editor startup" /></p>
<p>By default, <code>scene.rgs</code> scene is loaded, and it is our main scene, but for our player prefab we need a separate scene.
Go to <code>File</code> menu and click <code>New Scene</code>. Save the scene in <code>data/player</code> folder as <code>player.rgs</code>. </p>
<p>Great, now we ready to create the prefab. Right-click on the <code>__ROOT__</code> node in the World Viewer and find <code>Replace Node</code> 
and select <code>Physics -&gt; Rigid Body</code> there. By doing this, we've replaced the root node of the scene to be a rigid body. 
This is needed, because our player will be moving.</p>
<p><img src="editor_2.png" alt="replace node" /></p>
<p>Select rigid body and set the <code>X/Y/Z Rotation Locked</code> properties to <code>true</code>, <code>Can Sleep</code> - to <code>false</code>. The first three
properties prevents the rigid body from any undesired rotations and the last one prevents the rigid body to be excluded
from simulation.s</p>
<p><img src="rigid_body_props.png" alt="rigid body props" /></p>
<p>As you may notice, the editor added a small &quot;warning&quot; icon near the root node - it tells us that the rigid body does not
have a collider. Let's fix that:</p>
<p><img src="editor_3.png" alt="collider node" /></p>
<p>By default, the editor creates a cube collider, but we need a capsule. Let's change that in the Inspector:</p>
<p><img src="editor_4.png" alt="change collider type" /></p>
<p>Now let's change the size of the collider, because default values are disproportional for a humanoid character:</p>
<p><img src="editor_5.png" alt="collider properties" /></p>
<p>This way the capsule is thinner and taller, which roughly corresponds to a person of 1.8m tall. Now we need to add a 
<a href="../../scene/camera_node.html">camera</a>, because without it, we couldn't see anything. </p>
<p><img src="editor_6.png" alt="camera" /></p>
<p>Put the camera at the top of the capsule like so:</p>
<p><img src="editor_7.png" alt="camera position" /></p>
<p>Awesome, at this point we're almost done with this prefab. Save the scene (<code>File -&gt; Save Scene</code>) and let's start writing
some code.</p>
<h2 id="code"><a class="header" href="#code">Code</a></h2>
<p>Now we can start writing some code, that will drive our character. Game logic is located in <a href="../../scripting/script.html">scripts</a>.
Navigate to the <code>fps</code> directory and execute the following command there:</p>
<pre><code class="language-shell">fyrox-template script --name=player
</code></pre>
<p>This command creates a new script for our player in <code>game/src</code> folder. All you need to do now is to add the new module
to the <code>lib.rs</code> module by adding the <code>pub mod player;</code> after the imports:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>//! Game project.
use crate::player::Player;
use fyrox::{
    core::pool::Handle,
    event::Event,
    gui::message::UiMessage,
    plugin::{Plugin, PluginConstructor, PluginContext, PluginRegistrationContext},
    scene::Scene,
};
use std::path::Path;

// Add this line
pub mod player;
<span class="boring">}</span></code></pre></pre>
<p>All scripts must be registered in the engine explicitly, otherwise they won't work. To do that, add the following
lines to the <code>register</code> method:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>    fn register(&amp;self, context: PluginRegistrationContext) {
        context
            .serialization_context
            .script_constructors
            .add::&lt;Player&gt;(&quot;Player&quot;);
    }
<span class="boring">}</span></code></pre></pre>
<p>Great, now the new script is registered, and we can start writing a basic character controller. Let's start by input
handling. At first, add the following fields to the <code>Player</code> struct:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>    #[visit(optional)]
    #[reflect(hidden)]
    move_forward: bool,

    #[visit(optional)]
    #[reflect(hidden)]
    move_backward: bool,

    #[visit(optional)]
    #[reflect(hidden)]
    move_left: bool,

    #[visit(optional)]
    #[reflect(hidden)]
    move_right: bool,

    #[visit(optional)]
    #[reflect(hidden)]
    yaw: f32,

    #[visit(optional)]
    #[reflect(hidden)]
    pitch: f32,
<span class="boring">}</span></code></pre></pre>
<p>The first four fields are responsible for movement in four directions and the last two responsible for camera rotation.
The next thing that we need to do is properly react to incoming OS events to modify the variables that we've just 
defined. Add the following code to the <code>on_os_event</code> method like so:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>    fn on_os_event(&amp;mut self, event: &amp;Event&lt;()&gt;, context: &amp;mut ScriptContext) {
        match event {
            // Raw mouse input is responsible for camera rotation.
            Event::DeviceEvent {
                event:
                    DeviceEvent::MouseMotion {
                        delta: (dx, dy), ..
                    },
                ..
            } =&gt; {
                // Pitch is responsible for vertical camera rotation. It has -89.9..89.0 degree limits,
                // to prevent infinite rotation.
                let mouse_speed = 0.35;
                self.pitch = (self.pitch + *dy as f32 * mouse_speed).clamp(-89.9, 89.9);
                self.yaw -= *dx as f32 * mouse_speed;
            }
            // Keyboard input is responsible for player's movement.
            Event::WindowEvent {
                event: WindowEvent::KeyboardInput { event, .. },
                ..
            } =&gt; {
                if let PhysicalKey::Code(code) = event.physical_key {
                    let is_pressed = event.state == ElementState::Pressed;
                    match code {
                        KeyCode::KeyW =&gt; {
                            self.move_forward = is_pressed;
                        }
                        KeyCode::KeyS =&gt; {
                            self.move_backward = is_pressed;
                        }
                        KeyCode::KeyA =&gt; {
                            self.move_left = is_pressed;
                        }
                        KeyCode::KeyD =&gt; {
                            self.move_right = is_pressed;
                        }
                        _ =&gt; (),
                    }
                }
            }
            _ =&gt; {}
        }
    }
<span class="boring">}</span></code></pre></pre>
<p>This code consists from two major parts:</p>
<ul>
<li>Raw mouse input handling for camera rotations: we're using horizontal movement to rotate the camera around vertical
axis and vertical mouse movement is used to rotate the camera around horizontal axis.</li>
<li>Keyboard input handling for movement.</li>
</ul>
<p>This just modifies the internal script variables, and basically does not affect anything else. Next thing we'll add
movement code. Add the following code to <code>on_update</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>    fn on_update(&amp;mut self, context: &amp;mut ScriptContext) {
        let mut look_vector = Vector3::default();
        let mut side_vector = Vector3::default();
        if let Some(camera) = context.scene.graph.try_get_mut(self.camera) {
            look_vector = camera.look_vector();
            side_vector = camera.side_vector();

            let yaw = UnitQuaternion::from_axis_angle(&amp;Vector3::y_axis(), self.yaw.to_radians());
            let transform = camera.local_transform_mut();
            transform.set_rotation(
                UnitQuaternion::from_axis_angle(
                    &amp;UnitVector3::new_normalize(yaw * Vector3::x()),
                    self.pitch.to_radians(),
                ) * yaw,
            );
        }

        // Borrow the node to which this script is assigned to. We also check if the node is RigidBody.
        if let Some(rigid_body) = context
            .scene
            .graph
            .try_get_mut_of_type::&lt;RigidBody&gt;(context.handle)
        {
            // Form a new velocity vector that corresponds to the pressed buttons.
            let mut velocity = Vector3::new(0.0, 0.0, 0.0);
            if self.move_forward {
                velocity += look_vector;
            }
            if self.move_backward {
                velocity -= look_vector;
            }
            if self.move_left {
                velocity += side_vector;
            }
            if self.move_right {
                velocity -= side_vector;
            }

            let y_vel = rigid_body.lin_vel().y;
            if let Some(normalized_velocity) = velocity.try_normalize(f32::EPSILON) {
                let movement_speed = 240.0 * context.dt;
                rigid_body.set_lin_vel(Vector3::new(
                    normalized_velocity.x * movement_speed,
                    y_vel,
                    normalized_velocity.z * movement_speed,
                ));
            } else {
                // Hold player in-place in XZ plane when no button is pressed.
                rigid_body.set_lin_vel(Vector3::new(0.0, y_vel, 0.0));
            }
        }
    }
<span class="boring">}</span></code></pre></pre>
<p>This code is responsible for movement when any of WSAD keys are pressed. At first, it tries to borrow the node to which
this script is assigned to, then it checks if any of the WSAD keys are pressed, and it forms a new velocity vector using
the basis vectors of node. As the last step, it normalizes the vector (makes it unity length) and sets it to the rigid
body velocity.</p>
<p>Now let's add camera rotation, at first we need to know the camera handle. Add the following field to the <code>Player</code> struct:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>    #[visit(optional)]
    camera: Handle&lt;Node&gt;,
<span class="boring">}</span></code></pre></pre>
<p>We'll assign this field later in the editor, for let's focus on the code. Add the following piece of code at the end of
the <code>on_update</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>        let mut look_vector = Vector3::default();
        let mut side_vector = Vector3::default();
        if let Some(camera) = context.scene.graph.try_get_mut(self.camera) {
            look_vector = camera.look_vector();
            side_vector = camera.side_vector();

            let yaw = UnitQuaternion::from_axis_angle(&amp;Vector3::y_axis(), self.yaw.to_radians());
            let transform = camera.local_transform_mut();
            transform.set_rotation(
                UnitQuaternion::from_axis_angle(
                    &amp;UnitVector3::new_normalize(yaw * Vector3::x()),
                    self.pitch.to_radians(),
                ) * yaw,
            );
        }
<span class="boring">}</span></code></pre></pre>
<p>This piece of code is relatively straightforward: at first we're trying to borrow the camera in the scene graph using 
its handle, if it is succeeded, we form two quaternions that represent rotations around Y and X axes and combine them 
using simple multiplication. </p>
<p>Our script is almost ready, now all we need to do is to assign it to the player's prefab. Open the <code>player.rgs</code> prefab
in the editor, select <code>Player</code> node and assign the Player script to it. Do not forget to set Camera handle (by clicking
on the small green button and selecting Camera from the list):</p>
<p><img src="script_instance.png" alt="script instance" /></p>
<p>Great, now we're done with the player movement. We can test it our main scene, but at first let's create a simple level.
Open <code>scene.rgs</code> and create a rigid body with a collider. Add a cube as a child of the rigid body and squash it to some
floor-like shape. Select the collider and set it's kind to <code>Trimesh</code>, add a geometry source there and point it to the 
floor. Select the rigid body and set its type to <code>Static</code>. You can also add some texture to the cube to make it look
much better.</p>
<p>Now we can instantiate our player prefab in the scene. To do that, find the <code>player.rgs</code> in the Asset Browser, click
on it, hold the button, move the mouse over the scene and release the button. After that the prefab should be instantiated
at the cursor position like so:</p>
<p><img src="prefab_instance.png" alt="prefab instance" /></p>
<p>After that you can click <code>Play</code> button (green triangle above the scene preview) and you should see something like this:</p>
<p><img src="running_game_1.png" alt="running game" /></p>
<p>It should be possible to walk using WSAD keys and rotate the camera using mouse. </p>
<h2 id="weapons"><a class="header" href="#weapons">Weapons</a></h2>
<p>Work-in-progress.</p>
<h2 id="bots-and-ai"><a class="header" href="#bots-and-ai">Bots and AI</a></h2>
<p>Work-in-progress.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../tutorials/tutorials.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../tutorials/rpg/intro.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../tutorials/tutorials.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../tutorials/rpg/intro.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
