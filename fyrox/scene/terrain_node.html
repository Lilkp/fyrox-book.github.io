<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Terrain Node - Fyrox Book</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../introduction.html"><strong aria-hidden="true">1.</strong> About the Book</a></li><li class="chapter-item expanded "><a href="../../fyrox/introduction/index.html"><strong aria-hidden="true">2.</strong> Introduction</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../fyrox/introduction/introduction.html"><strong aria-hidden="true">2.1.</strong> Introduction to Fyrox</a></li><li class="chapter-item expanded "><a href="../../fyrox/introduction/requirements.html"><strong aria-hidden="true">2.2.</strong> System Requirements and Supported Platforms</a></li><li class="chapter-item expanded "><a href="../../fyrox/introduction/basic_concepts.html"><strong aria-hidden="true">2.3.</strong> Basic concepts</a></li><li class="chapter-item expanded "><a href="../../fyrox/introduction/philosophy_and_goals.html"><strong aria-hidden="true">2.4.</strong> Design Philosophy and Goals</a></li><li class="chapter-item expanded "><a href="../../fyrox/introduction/faq.html"><strong aria-hidden="true">2.5.</strong> Frequently Asked Questions</a></li></ol></li><li class="chapter-item expanded "><a href="../../fyrox/beginning/getting_started.html"><strong aria-hidden="true">3.</strong> Getting started</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../fyrox/beginning/scripting.html"><strong aria-hidden="true">3.1.</strong> Editor, Plugins and Scripts</a></li><li class="chapter-item expanded "><a href="../../fyrox/beginning/editor_overview.html"><strong aria-hidden="true">3.2.</strong> Editor Overview</a></li><li class="chapter-item expanded "><a href="../../fyrox/beginning/scene_and_scene_graph.html"><strong aria-hidden="true">3.3.</strong> Scene and scene graph</a></li><li class="chapter-item expanded "><a href="../../fyrox/beginning/assets.html"><strong aria-hidden="true">3.4.</strong> Assets</a></li><li class="chapter-item expanded "><a href="../../fyrox/beginning/data_management.html"><strong aria-hidden="true">3.5.</strong> Data management</a></li></ol></li><li class="chapter-item expanded "><a href="../../fyrox/scripting/scripting.html"><strong aria-hidden="true">4.</strong> Scripting</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../fyrox/scripting/plugin.html"><strong aria-hidden="true">4.1.</strong> Plugins</a></li><li class="chapter-item expanded "><a href="../../fyrox/scripting/executor.html"><strong aria-hidden="true">4.2.</strong> Executor</a></li><li class="chapter-item expanded "><a href="../../fyrox/scripting/script.html"><strong aria-hidden="true">4.3.</strong> Scripts</a></li></ol></li><li class="chapter-item expanded "><a href="../../fyrox/scene/scene.html"><strong aria-hidden="true">5.</strong> Scene</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../fyrox/scene/graph.html"><strong aria-hidden="true">5.1.</strong> Graph</a></li><li class="chapter-item expanded "><a href="../../fyrox/scene/transform.html"><strong aria-hidden="true">5.2.</strong> Transformation</a></li><li class="chapter-item expanded "><a href="../../fyrox/scene/prefab.html"><strong aria-hidden="true">5.3.</strong> Prefabs</a></li><li class="chapter-item expanded "><a href="../../fyrox/scene/inheritance.html"><strong aria-hidden="true">5.4.</strong> Property Inheritance</a></li><li class="chapter-item expanded "><a href="../../fyrox/scene/base_node.html"><strong aria-hidden="true">5.5.</strong> Base Node</a></li><li class="chapter-item expanded "><a href="../../fyrox/scene/mesh_node.html"><strong aria-hidden="true">5.6.</strong> Mesh Node</a></li><li class="chapter-item expanded "><a href="../../fyrox/scene/light_node.html"><strong aria-hidden="true">5.7.</strong> Light Node</a></li><li class="chapter-item expanded "><a href="../../fyrox/scene/sprite_node.html"><strong aria-hidden="true">5.8.</strong> Sprite Node</a></li><li class="chapter-item expanded "><a href="../../fyrox/scene/particle_system_node.html"><strong aria-hidden="true">5.9.</strong> Particle System Node</a></li><li class="chapter-item expanded "><a href="../../fyrox/scene/terrain_node.html" class="active"><strong aria-hidden="true">5.10.</strong> Terrain Node</a></li><li class="chapter-item expanded "><a href="../../fyrox/scene/camera_node.html"><strong aria-hidden="true">5.11.</strong> Camera Node</a></li><li class="chapter-item expanded "><a href="../../fyrox/scene/decal_node.html"><strong aria-hidden="true">5.12.</strong> Decal Node</a></li><li class="chapter-item expanded "><a href="../../fyrox/scene/rectangle.html"><strong aria-hidden="true">5.13.</strong> Rectangle Node</a></li><li class="chapter-item expanded "><a href="../../fyrox/scene/custom_node.html"><strong aria-hidden="true">5.14.</strong> Custom Node</a></li><li class="chapter-item expanded "><a href="../../fyrox/physics/physics.html"><strong aria-hidden="true">5.15.</strong> Physics</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../fyrox/physics/rigid_body.html"><strong aria-hidden="true">5.15.1.</strong> Rigid Body</a></li><li class="chapter-item expanded "><a href="../../fyrox/physics/collider.html"><strong aria-hidden="true">5.15.2.</strong> Collider</a></li><li class="chapter-item expanded "><a href="../../fyrox/physics/joint.html"><strong aria-hidden="true">5.15.3.</strong> Joint</a></li><li class="chapter-item expanded "><a href="../../fyrox/physics/ray.html"><strong aria-hidden="true">5.15.4.</strong> Ray Casting</a></li><li class="chapter-item expanded "><a href="../../fyrox/physics/ragdoll.html"><strong aria-hidden="true">5.15.5.</strong> Ragdoll</a></li></ol></li><li class="chapter-item expanded "><a href="../../fyrox/sound/index.html"><strong aria-hidden="true">5.16.</strong> Sound</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../fyrox/sound/bus.html"><strong aria-hidden="true">5.16.1.</strong> Audio Bus</a></li><li class="chapter-item expanded "><a href="../../fyrox/sound/sound.html"><strong aria-hidden="true">5.16.2.</strong> Sound Node</a></li><li class="chapter-item expanded "><a href="../../fyrox/sound/hrtf.html"><strong aria-hidden="true">5.16.3.</strong> HRTF</a></li></ol></li><li class="chapter-item expanded "><a href="../../fyrox/animation/animation.html"><strong aria-hidden="true">5.17.</strong> Animation</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../fyrox/animation/anim_editor.html"><strong aria-hidden="true">5.17.1.</strong> Animation Editor</a></li><li class="chapter-item expanded "><a href="../../fyrox/animation/blending.html"><strong aria-hidden="true">5.17.2.</strong> Animation Blending</a></li><li class="chapter-item expanded "><a href="../../fyrox/animation/absm_editor.html"><strong aria-hidden="true">5.17.3.</strong> ABSM Editor</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../fyrox/ai/ai.html"><strong aria-hidden="true">6.</strong> Artificial Intelligence (WIP)</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../fyrox/ai/beh_tree.html"><strong aria-hidden="true">6.1.</strong> Behaviour Trees (WIP)</a></li><li class="chapter-item expanded "><a href="../../fyrox/ai/pathfinding.html"><strong aria-hidden="true">6.2.</strong> Path Finding</a></li><li class="chapter-item expanded "><a href="../../fyrox/ai/navmesh.html"><strong aria-hidden="true">6.3.</strong> Navigational Meshes</a></li></ol></li><li class="chapter-item expanded "><a href="../../fyrox/rendering/rendering.html"><strong aria-hidden="true">7.</strong> Rendering</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../fyrox/rendering/shaders.html"><strong aria-hidden="true">7.1.</strong> Shaders</a></li><li class="chapter-item expanded "><a href="../../fyrox/rendering/materials.html"><strong aria-hidden="true">7.2.</strong> Materials</a></li><li class="chapter-item expanded "><a href="../../fyrox/rendering/lightmaps.html"><strong aria-hidden="true">7.3.</strong> Light Maps (WIP)</a></li><li class="chapter-item expanded "><a href="../../fyrox/rendering/settings.html"><strong aria-hidden="true">7.4.</strong> Settings</a></li><li class="chapter-item expanded "><a href="../../fyrox/rendering/render_pass.html"><strong aria-hidden="true">7.5.</strong> Render Pass</a></li><li class="chapter-item expanded "><a href="../../fyrox/rendering/normal_maps.html"><strong aria-hidden="true">7.6.</strong> Normal Maps</a></li></ol></li><li class="chapter-item expanded "><a href="../../fyrox/resources/resources.html"><strong aria-hidden="true">8.</strong> Resource Management</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../fyrox/resources/model.html"><strong aria-hidden="true">8.1.</strong> Models</a></li><li class="chapter-item expanded "><a href="../../fyrox/resources/texture.html"><strong aria-hidden="true">8.2.</strong> Textures</a></li><li class="chapter-item expanded "><a href="../../fyrox/resources/sound.html"><strong aria-hidden="true">8.3.</strong> Sound Buffers (WIP)</a></li><li class="chapter-item expanded "><a href="../../fyrox/resources/curve.html"><strong aria-hidden="true">8.4.</strong> Curves (WIP)</a></li><li class="chapter-item expanded "><a href="../../fyrox/resources/custom.html"><strong aria-hidden="true">8.5.</strong> Custom Resource</a></li></ol></li><li class="chapter-item expanded "><a href="../../fyrox/ui/ui.html"><strong aria-hidden="true">9.</strong> User Interface</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../fyrox/ui/basic_concepts/basic_concepts.html"><strong aria-hidden="true">9.1.</strong> Basic concepts</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/general_rules.html"><strong aria-hidden="true">9.2.</strong> General rules</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/rendering.html"><strong aria-hidden="true">9.3.</strong> Rendering</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/font.html"><strong aria-hidden="true">9.4.</strong> Fonts</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/style.html"><strong aria-hidden="true">9.5.</strong> Style</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/widgets.html"><strong aria-hidden="true">9.6.</strong> Widgets</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../fyrox/ui/button.html"><strong aria-hidden="true">9.6.1.</strong> Button</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/border.html"><strong aria-hidden="true">9.6.2.</strong> Border</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/canvas.html"><strong aria-hidden="true">9.6.3.</strong> Canvas</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/checkbox/check_box.html"><strong aria-hidden="true">9.6.4.</strong> Check box</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/curve_editor.html"><strong aria-hidden="true">9.6.5.</strong> Curve editor (WIP)</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/decorator.html"><strong aria-hidden="true">9.6.6.</strong> Decorator (WIP)</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/dock.html"><strong aria-hidden="true">9.6.7.</strong> Docking manager (WIP)</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/dropdown_list.html"><strong aria-hidden="true">9.6.8.</strong> Dropdown list (WIP)</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/expander.html"><strong aria-hidden="true">9.6.9.</strong> Expander (WIP)</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/file_browser.html"><strong aria-hidden="true">9.6.10.</strong> File browser (WIP)</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/grid.html"><strong aria-hidden="true">9.6.11.</strong> Grid</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/image.html"><strong aria-hidden="true">9.6.12.</strong> Image</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/inspector.html"><strong aria-hidden="true">9.6.13.</strong> Inspector (WIP)</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/list_view.html"><strong aria-hidden="true">9.6.14.</strong> List view (WIP)</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/menu.html"><strong aria-hidden="true">9.6.15.</strong> Menu (WIP)</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/message_box.html"><strong aria-hidden="true">9.6.16.</strong> Message box (WIP)</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/numeric.html"><strong aria-hidden="true">9.6.17.</strong> Numeric field</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/popup.html"><strong aria-hidden="true">9.6.18.</strong> Popup (WIP)</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/progress_bar.html"><strong aria-hidden="true">9.6.19.</strong> Progress bar (WIP)</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/range.html"><strong aria-hidden="true">9.6.20.</strong> Range (WIP)</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/rect.html"><strong aria-hidden="true">9.6.21.</strong> Rect (WIP)</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/scroll_bar.html"><strong aria-hidden="true">9.6.22.</strong> Scroll bar</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/scroll_panel.html"><strong aria-hidden="true">9.6.23.</strong> Scroll panel (WIP)</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/scroll_viewer.html"><strong aria-hidden="true">9.6.24.</strong> Scroll viewer (WIP)</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/stack_panel.html"><strong aria-hidden="true">9.6.25.</strong> Stack panel</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/tab_control.html"><strong aria-hidden="true">9.6.26.</strong> Tab Control</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/text.html"><strong aria-hidden="true">9.6.27.</strong> Text</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/text_box.html"><strong aria-hidden="true">9.6.28.</strong> Text box</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/tree.html"><strong aria-hidden="true">9.6.29.</strong> Tree (WIP)</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/vector_image.html"><strong aria-hidden="true">9.6.30.</strong> Vector image (WIP)</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/window.html"><strong aria-hidden="true">9.6.31.</strong> Window</a></li><li class="chapter-item expanded "><a href="../../fyrox/ui/wrap_panel.html"><strong aria-hidden="true">9.6.32.</strong> Wrap panel</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../fyrox/serialization/index.html"><strong aria-hidden="true">10.</strong> Serialization</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../fyrox/serialization/save.html"><strong aria-hidden="true">10.1.</strong> Saved Games (WIP)</a></li></ol></li><li class="chapter-item expanded "><a href="../../fyrox/editor/index.html"><strong aria-hidden="true">11.</strong> Editor</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../fyrox/editor/property_editors.html"><strong aria-hidden="true">11.1.</strong> Property Editors</a></li><li class="chapter-item expanded "><a href="../../fyrox/editor/settings.html"><strong aria-hidden="true">11.2.</strong> Settings</a></li></ol></li><li class="chapter-item expanded "><a href="../../fyrox/misc/misc.html"><strong aria-hidden="true">12.</strong> Miscellaneous</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../fyrox/misc/log.html"><strong aria-hidden="true">12.1.</strong> Log</a></li></ol></li><li class="chapter-item expanded "><a href="../../fyrox/tutorials/tutorials.html"><strong aria-hidden="true">13.</strong> Tutorials</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../fyrox/tutorials/fps/intro.html"><strong aria-hidden="true">13.1.</strong> FPS Tutorial</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../fyrox/tutorials/fps/tutorial-1/tutorial-part-1.html"><strong aria-hidden="true">13.1.1.</strong> Character controller</a></li><li class="chapter-item expanded "><a href="../../fyrox/tutorials/fps/tutorial-2/tutorial-part-2.html"><strong aria-hidden="true">13.1.2.</strong> Weapons</a></li><li class="chapter-item expanded "><a href="../../fyrox/tutorials/fps/tutorial-3/tutorial-part-3.html"><strong aria-hidden="true">13.1.3.</strong> Bots and AI</a></li></ol></li><li class="chapter-item expanded "><a href="../../fyrox/tutorials/rpg/intro.html"><strong aria-hidden="true">13.2.</strong> RPG Tutorial</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../fyrox/tutorials/rpg/tutorial-1/tutorial-part-1.html"><strong aria-hidden="true">13.2.1.</strong> Character controller</a></li></ol></li><li class="chapter-item expanded "><a href="../../fyrox/tutorials/platformer/part1.html"><strong aria-hidden="true">13.3.</strong> 2D Platformer tutorial</a></li></ol></li><li class="chapter-item expanded "><a href="../../fyrox/performance/index.html"><strong aria-hidden="true">14.</strong> Performance</a></li><li class="chapter-item expanded "><a href="../../fyrox/obsolete/obsolete.html"><strong aria-hidden="true">15.</strong> Obsolete</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../fyrox/obsolete/installation.html"><strong aria-hidden="true">15.1.</strong> Installation (Obsolete)</a></li><li class="chapter-item expanded "><a href="../../fyrox/obsolete/custom_game_loop.html"><strong aria-hidden="true">15.2.</strong> Custom game loop (Obsolete)</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Fyrox Book</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/fyrox-book/fyrox-book.github.io" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="terrain"><a class="header" href="#terrain">Terrain</a></h1>
<p>Terrain is a scene node that represents uniform grid of cells where each cell can have different height. Other, commonly
known name for terrain is heightmap. Terrains used to create maps for open-world games, it be used to create hills,
mountains, plateau, roads, etc.</p>
<p><img src="./terrain.png" alt="terrain" /></p>
<h2 id="basic-concepts"><a class="header" href="#basic-concepts">Basic concepts</a></h2>
<p>There are few basic concepts that you should understand before trying to use terrains. This will help you to understand
design decisions and potential use cases.</p>
<h3 id="heightmap"><a class="header" href="#heightmap">Heightmap</a></h3>
<p>As it was already mentioned, terrain is a uniform grid where X and Z coordinates of cells have fixed values, while Y
can change. In this case we can store only width, height and resolution numerical parameters to calculate X and Z coordinates,
while Y is stored in a separate array which is then used to modify heights of cells. Such array is called <em>heightmap</em>.</p>
<p><img src="./terrain_mesh.png" alt="terrain mesh" /></p>
<h3 id="layers"><a class="header" href="#layers">Layers</a></h3>
<p>Layer is a material + mask applied to terrain's mesh. Mask is a separate, greyscale texture that defines in which parts
of the terrain the material should be visible or not. White pixels in the mask makes the material to be visible, black -
completely transparent, everything between helps you to create smooth transitions between layers. Here's a simple 
example of multiple layers:</p>
<p><img src="./terrain_layers_layout.png" alt="terrain layers layout" /></p>
<p>There are 3 layers: 1 - dirt, 2 - grass, 3 - rocks and grass. As you can see, there are smooth transitions between each
layer, it is achieved by layer's mask.</p>
<p>Each layer uses separate material, which can be edited from respective property editor in the Inspector:</p>
<p><img src="./terrain_layer_material.png" alt="terrain layer material" /></p>
<h2 id="creating-terrain-in-the-editor"><a class="header" href="#creating-terrain-in-the-editor">Creating terrain in the editor</a></h2>
<p>You can create a terrain node by clicking <code>Create -&gt; Terrain</code>. It will create a terrain with fixed width, height, 
and resolution (see <a href="./terrain_node.html#limitations-and-known-issues">limitations</a>). Once the terrain is created, select
it in the World Viewer and click on Hill icon on the toolbar. This will enable terrain editing, brush options panel 
should also appear. See the picture below with all the steps:</p>
<p><img src="./terrain_editing.png" alt="terrain editing" /></p>
<p>The green rectangle on the terrain under the cursor represents current brush. You can edit brush options in the 
<code>Brush Options</code> window:</p>
<p><img src="./brush_options.png" alt="brush options" /></p>
<p>You can select a shape (either circle or rectangle with configurable size) and a mode (either modify the height map, or
draw on mask of specific layer).</p>
<p>When editing terrain's height, left mouse button raises height map, but if <code>Shift</code> key is pressed it lowers it instead.
Something similar is applied to the mask editing - left mouse button draws, but if hold <code>Shift</code> - it will erase mask
content.</p>
<h2 id="creating-terrain-from-code"><a class="header" href="#creating-terrain-from-code">Creating terrain from code</a></h2>
<p>Terrain can always be created from code, here's comprehensive example of how to create and modify terrain from code:</p>
<pre><pre class="playground"><code class="language-rust no_run"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span><span class="boring">extern crate fyrox;
</span><span class="boring">use fyrox::{
</span><span class="boring">    core::{
</span><span class="boring">        algebra::Vector2, algebra::Vector3, parking_lot::Mutex, pool::Handle,
</span><span class="boring">        sstorage::ImmutableString,
</span><span class="boring">    },
</span><span class="boring">    asset::manager::ResourceManager, resource::texture::Texture,
</span><span class="boring">    material::{shader::SamplerFallback, Material, PropertyValue, SharedMaterial},
</span><span class="boring">    rand::{thread_rng, Rng},
</span><span class="boring">    scene::{
</span><span class="boring">        base::BaseBuilder,
</span><span class="boring">        graph::Graph,
</span><span class="boring">        node::Node,
</span><span class="boring">        terrain::{Brush, BrushMode, BrushShape, Layer, TerrainBuilder},
</span><span class="boring">    },
</span><span class="boring">};
</span><span class="boring">use std::sync::Arc;
</span><span class="boring">
</span>fn setup_layer_material(
    material: &amp;mut Material,
    resource_manager: ResourceManager,
    diffuse_texture: &amp;str,
    normal_texture: &amp;str,
) {
    material
        .set_property(
            &amp;ImmutableString::new(&quot;diffuseTexture&quot;),
            PropertyValue::Sampler {
                value: Some(resource_manager.request::&lt;Texture, _&gt;(diffuse_texture)),
                fallback: SamplerFallback::White,
            },
        )
        .unwrap();
    material
        .set_property(
            &amp;ImmutableString::new(&quot;normalTexture&quot;),
            PropertyValue::Sampler {
                value: Some(resource_manager.request::&lt;Texture, _&gt;(normal_texture)),
                fallback: SamplerFallback::Normal,
            },
        )
        .unwrap();
    material
        .set_property(
            &amp;ImmutableString::new(&quot;texCoordScale&quot;),
            PropertyValue::Vector2(Vector2::new(10.0, 10.0)),
        )
        .unwrap();
}

fn create_random_two_layer_terrain(graph: &amp;mut Graph, resource_manager: &amp;ResourceManager) -&gt; Handle&lt;Node&gt; {
    let terrain = TerrainBuilder::new(BaseBuilder::new())
        .with_layers(vec![
            Layer {
                material: {
                    let mut material = Material::standard_terrain();
                    setup_layer_material(
                        &amp;mut material,
                        resource_manager.clone(),
                        &quot;examples/data/Grass_DiffuseColor.jpg&quot;,
                        &quot;examples/data/Grass_NormalColor.jpg&quot;,
                    );
                    SharedMaterial::new(material)
                },
                .. Default::default()
            },
            Layer {
                material: {
                    let mut material = Material::standard_terrain();
                    setup_layer_material(
                        &amp;mut material,
                        resource_manager.clone(),
                        &quot;examples/data/Rock_DiffuseColor.jpg&quot;,
                        &quot;examples/data/Rock_Normal.jpg&quot;,
                    );
                    SharedMaterial::new(material)
                },
                .. Default::default()
            },
        ])
        .build(graph);

    let terrain_ref = graph[terrain].as_terrain_mut();

    // Draw something on the terrain.
    for _ in 0..60 {
        let x = thread_rng().gen_range(4.0..60.00);
        let z = thread_rng().gen_range(4.0..60.00);
        let radius = thread_rng().gen_range(2.0..4.0);
        let height = thread_rng().gen_range(1.0..3.0);

        // Pull terrain.
        terrain_ref.draw(&amp;Brush {
            center: Vector3::new(x, 0.0, z),
            shape: BrushShape::Circle { radius },
            mode: BrushMode::ModifyHeightMap { amount: height },
        });

        // Draw rock texture on top.
        terrain_ref.draw(&amp;Brush {
            center: Vector3::new(x, 0.0, z),
            shape: BrushShape::Circle { radius },
            mode: BrushMode::DrawOnMask {
                layer: 1,
                alpha: 1.0,
            },
        });
    }

    terrain
}
<span class="boring">}</span></code></pre></pre>
<p>As you can see there is quite a lot of code, ideally you should use editor all the times, because handling everything
from code could be very tedious. The result of its execution (if all textures are set correctly) could be something 
like this (keep in mind that terrain will be random everytime you run the code):</p>
<p><img src="./terrain_random.png" alt="terrain from code" /></p>
<h2 id="physics"><a class="header" href="#physics">Physics</a></h2>
<p>By default, terrains does not have respective physical body and shape, it should be added manually. Create a static 
rigid body node with a collider with Heightmap shape (<a href="../physics/collider.html">learn more about colliders</a>). Then attach
the terrain to the rigid body. Keep in mind that terrain's origin differs from Heightmap rigid body, so you need to offset 
the terrain to match its physical representation. Enable physics visualization in editor settings to see physical shapes 
and move terrain. Now to move the terrain you should move the body, instead of the terrain (because of parent-child 
<a href="../beginning/scene_and_scene_graph.html#local-and-global-coordinates">relations</a>).</p>
<h2 id="performance"><a class="header" href="#performance">Performance</a></h2>
<p>Terrain rendering complexity have linear dependency with the amount of layers terrain have. Each layer forces the engine
to re-render terrain's geometry with different textures and mask. Typical amount of layers is from 4 to 8. For example,
a terrain could have the following layers: dirt, grass, rock, snow. This is a relatively lightweight scheme. In any case,
you should measure frame time to understand how each new layer affects performance in your case.</p>
<h2 id="chunking"><a class="header" href="#chunking">Chunking</a></h2>
<p>Terrain itself does not define any geometry or rendering data, instead it uses one or more chunks for that purpose. Each
chunk could be considered as a &quot;sub-terrain&quot;. You can &quot;stack&quot; any amount of chunks from any side of the terrain. To do 
that, you define a range of chunks along each axes. This is very useful if you need to extend your terrain in a particular 
direction. Imagine that you've created a terrain with just one chunk (<code>0..1</code> range on both axes), but suddenly you found
that you need to extend the terrain to add some new game locations. In this case you can change the range of chunks at 
the desired axis. For instance, if you want to add a new location to the right from your single chunk, then you should 
change <code>width_chunks</code> range to <code>0..2</code> and leave <code>length_chunks</code> as is (<code>0..1</code>). This way terrain will be extended, and 
you can start shaping the new location.</p>
<h2 id="level-of-detail"><a class="header" href="#level-of-detail">Level-of-detail</a></h2>
<p>Terrain has automatic LOD system, which means that the closest portions of it will be rendered with the highest
possible quality (defined by the resolution of height map and masks), while the furthest portions will be
rendered with the lowest quality. This effectively balances GPU load and allows you to render huge terrains with
low overhead.</p>
<p>The main parameter that affects LOD system is <code>block_size</code> (<code>Terrain::set_block_size</code>), which defines size of the patch 
that will be used for rendering. It is used to divide the size of the height map into a fixed set of blocks using 
quad-tree algorithm.</p>
<p>Current implementation uses modified version of CDLOD algorithm without patch morphing. Apparently it is not needed, 
since bilinear filtration in vertex shader prevents seams to occur.</p>
<p>Current implementation makes it possible to render huge terrains (64x64 km) with 4096x4096 heightmap resolution in about a 
millisecond on average low-to-middle-end GPU.</p>
<h2 id="limitations-and-known-issues"><a class="header" href="#limitations-and-known-issues">Limitations and known issues</a></h2>
<p>There is no way to cut holes in the terrain yet, it makes impossible to create caves. There is also no way to create 
ledges, use separate meshes to imitate this. See <a href="https://github.com/FyroxEngine/Fyrox/issues/351">tracking issue</a> for
more info.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../fyrox/scene/particle_system_node.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../fyrox/scene/camera_node.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../fyrox/scene/particle_system_node.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../fyrox/scene/camera_node.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
